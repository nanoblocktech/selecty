!function(t,e,i){var s,n=[].slice;e.Selecty=s=function(){function e(e,s){this.options=t.extend({},this.defaults,s),this.prefix="selecty",this.className="Selecty",this.classPrefix="."+this.prefix,this.$select=e,this.$container=t('<div class="'+this.prefix+'-container"></div>'),this.$innerContainer=t('<div class="'+this.prefix+'-inner-container"></div>'),this.$listGroup=t('<ul class="'+this.prefix+'-list"></ul>'),this.isOpen=!1,this.$parent=t(this.options.dropdownParent),this.itemPrefix=this.prefix+"-item",this.listClickable="li."+this.itemPrefix,t(i).on("click",t(this.listClickable,this.$listGroup),(e=>{if(this.isOpen){if(!t(e.target).closest(this.listClickable,this.$listGroup).length)return;var i=t(e.target).attr("data-value"),s=t(e.target).text();this.select({instance:e,value:i,text:s})}})).on("click",(e=>{this.isOpen&&(t(e.target).closest(this.classPrefix+"-heading").length||this.closeList())})).on("click",this.classPrefix+"-container "+this.classPrefix+"-close",(t=>{t.preventDefault(),this.closeList()})),this.options.initialOptions.length>0&&this.initialOptions(),this.onCreate()}return e.prototype.defaults={dropdownParent:t("body"),theme:"full",width:"100%",multiple:!1,dropdownCssClass:"",selectionCssClass:"",title:"",closeText:"Close",placeholder:"Option",template:function(t){return t.text},initialOptions:[]},e.prototype.onCreate=function(){this.$select.data(this.className)||this.$select.data(this.className,this),this.$listGroup.attr({role:"listbox","aria-expanded":"true","aria-hidden":"false"}),this.$select.addClass(this.prefix+"-hidden-accessible"),this.$select.trigger(this.prefix+":created")},e.prototype.open=function(){this.$select.is(":disabled")||(this.$select.trigger(this.prefix+":opening"),this.openList())},e.prototype.close=function(){this.$select.trigger(this.prefix+":closing"),this.closeList()},e.prototype.add=function(t,e){this.addOptions(t,e)},e.prototype.remove=function(t){},e.prototype.destroy=function(){this.$select.off("."+this.className),this.$container.remove(),this.$select.removeData(this.className),this.$select.trigger(this.prefix+":destroy")},e.prototype.select=function(e){var i=t(e.instance.target);this.$select.val(e.value),i.attr("data-selected","true"),this.$select.trigger("input").trigger("change"),this.$select.trigger(this.prefix+":select",[{value:e.value,text:e.text,data:e}]),this.options.multiple||(i.siblings().attr("data-selected","false"),this.closeList())},e.prototype.unselect=function(t){this.options.multiple},e.prototype.openList=function(){var e=this;this.$listGroup.add(this.$container).add(this.$innerContainer).empty(),this.$select.attr("aria-expanded","true"),this.$select.attr("aria-hidden","false");var i=this.$select.find("option:first"),s="";s=i.length&&i.prop("disabled")?i.text()||"":this.options.title||this.$select.attr("data-title")||"";var n=t(`\n                <div class="${this.prefix}-heading">\n                    <span class="${this.prefix}-title">${s}</span>\n                    <button type="button" class="${this.prefix}-close">${this.options.closeText}</button>\n                </div>\n            `);this.$innerContainer.append(n),this.$select.find("option").each(((t,i)=>{var s=e.options.template(i),n=e.toItem(s);n.attr({"data-value":i.value,"data-index":t,"aria-disabled":i.disabled,"data-selected":i.selected,role:"option"}),n.addClass(e.itemPrefix+" "+e.options.selectionCssClass),i.setAttribute(e.itemPrefix+"-id",e.itemPrefix+"-"+t+"-"+e.newId(5)),e.$listGroup.append(n)})).promise().then((function(){e.$innerContainer.append(e.$listGroup),e.$container.html(e.$innerContainer).addClass(e.options.dropdownCssClass),e.$parent.append(e.$container),e.isOpen=!0,e.$select.trigger(this.prefix+":open")}))},e.prototype.toItem=function(e){return t("<li></li>").html(e)},e.prototype.newId=function(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let i="";for(let s=0;s<t;s++){const t=Math.floor(Math.random()*e.length);i+=e.charAt(t)}return i},e.prototype.toggleList=function(){this.isOpen?this.closeList():this.openList()},e.prototype.closeList=function(){this.$container.detach(),this.$select.attr("aria-expanded","false"),this.$select.attr("aria-hidden","true"),this.isOpen=!1,this.$select.trigger(this.prefix+":close")},e.prototype.updateList=function(){this.isOpen&&this.openList(),this.$select.trigger(this.prefix+":update")},e.prototype.initialOptions=function(){this.$select.empty();for(var e=0;e<this.options.initialOptions.length;e++){var i=this.options.initialOptions[e],s=this.option(i.value,i.text);this.$select.append(t(s))}this.updateList()},e.prototype.addOptions=function(t,e){var i=this.option(t,e);this.$select.append(i),this.updateList()},e.prototype.option=function(t,e){return'<option value="'+t+'">'+e+"</option>"},e}(),t.fn.extend({Selecty:function(){var e,i;return i=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],this.each((function(){var n,o;if((o=(n=t(this)).data("Selecty"))||n.data("Selecty",o=new s(n,i)),"string"==typeof i)return o[i].apply(o,e)}))}})}(jQuery,window,document);
